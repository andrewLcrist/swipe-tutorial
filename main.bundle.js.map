{"version":3,"sources":["webpack:///webpack/bootstrap 0aea15f1931bff1a0400","webpack:///./index.js"],"names":["Cards","cards","Array","from","document","querySelectorAll","onStart","bind","onMove","onEnd","update","targetBCR","target","startX","currentX","screenX","targetX","draggingCard","addEventListeners","requestAnimationFrame","addEventListener","e","classList","contains","getBoundingClientRect","pageX","touches","style","willChange","preventDefault","threshold","width","Math","abs","normalizedDragDistance","opacity","pow","transform","isNearlyAtStart","isNearlyInvisible","parentNode","removeChild","targetIndex","indexOf","splice","animateOtherCardsIntoPosition","resetTarget","startIndex","length","onAnimationComplete","card","removeEventListener","transition","i","height","window"],"mappings":"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","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 0aea15f1931bff1a0400","'use strict';\n\nclass Cards {\n  constructor () {\n    this.cards = Array.from(document.querySelectorAll('.card'));\n\n    this.onStart = this.onStart.bind(this);\n    this.onMove = this.onMove.bind(this);\n    this.onEnd = this.onEnd.bind(this);\n    this.update = this.update.bind(this);\n    this.targetBCR = null;\n    this.target = null;\n    this.startX = 0;\n    this.currentX = 0;\n    this.screenX = 0;\n    this.targetX = 0;\n    this.draggingCard = false;\n\n    this.addEventListeners();\n\n    requestAnimationFrame(this.update);\n  }\n\n  addEventListeners () {\n    document.addEventListener('touchstart', this.onStart);\n    document.addEventListener('touchmove', this.onMove);\n    document.addEventListener('touchend', this.onEnd);\n\n    document.addEventListener('mousedown', this.onStart);\n    document.addEventListener('mousemove', this.onMove);\n    document.addEventListener('mouseup', this.onEnd);\n  }\n\n  onStart (e) {\n    if (this.target)\n      return;\n\n    if (!e.target.classList.contains('card'))\n      return;\n\n    this.target = e.target;\n    this.targetBCR = this.target.getBoundingClientRect();\n\n    this.startX = e.pageX || e.touches[0].pageX;\n    this.currentX = this.startX;\n\n    this.draggingCard = true;\n    this.target.style.willChange = 'transform';\n\n    e.preventDefault();\n  }\n\n  onMove (e) {\n    if (!this.target)\n      return;\n\n    this.currentX = e.pageX || e.touches[0].pageX;\n  }\n\n  onEnd (e) {\n    if (!this.target)\n      return;\n\n    this.targetX = 0;\n    let screenX = this.currentX - this.startX;\n    const threshold = this.targetBCR.width * 0.35;\n    if (Math.abs(screenX) > threshold) {\n      this.targetX = (screenX > 0) ?\n           this.targetBCR.width :\n          -this.targetBCR.width;\n    }\n\n    this.draggingCard = false;\n  }\n\n  update () {\n\n    requestAnimationFrame(this.update);\n\n    if (!this.target)\n      return;\n\n    if (this.draggingCard) {\n      this.screenX = this.currentX - this.startX;\n    } else {\n      this.screenX += (this.targetX - this.screenX) / 4;\n    }\n\n    const normalizedDragDistance =\n        (Math.abs(this.screenX) / this.targetBCR.width);\n    const opacity = 1 - Math.pow(normalizedDragDistance, 3);\n\n    this.target.style.transform = `translateX(${this.screenX}px)`;\n    this.target.style.opacity = opacity;\n\n    if (this.draggingCard)\n      return;\n\n    const isNearlyAtStart = (Math.abs(this.screenX) < 0.1);\n    const isNearlyInvisible = (opacity < 0.01);\n\n    if (isNearlyInvisible) {\n\n      if (!this.target || !this.target.parentNode)\n        return;\n\n      this.target.parentNode.removeChild(this.target);\n\n      const targetIndex = this.cards.indexOf(this.target);\n      this.cards.splice(targetIndex, 1);\n\n      this.animateOtherCardsIntoPosition(targetIndex);\n\n    } else if (isNearlyAtStart) {\n      this.resetTarget();\n    }\n  }\n\n  animateOtherCardsIntoPosition (startIndex) {\n    if (startIndex === this.cards.length) {\n      this.resetTarget();\n      return;\n    }\n\n    const onAnimationComplete = e => {\n      const card = e.target;\n      card.removeEventListener('transitionend', onAnimationComplete);\n      card.style.transition = '';\n      card.style.transform = '';\n\n      this.resetTarget();\n    };\n\n    for (let i = startIndex; i < this.cards.length; i++) {\n      const card = this.cards[i];\n\n      card.style.transform = `translateY(${this.targetBCR.height + 20}px)`;\n      card.addEventListener('transitionend', onAnimationComplete);\n    }\n\n    requestAnimationFrame(_ => {\n      for (let i = startIndex; i < this.cards.length; i++) {\n        const card = this.cards[i];\n\n        card.style.transition = `transform 150ms cubic-bezier(0,0,0.31,1) ${i*50}ms`;\n        card.style.transform = '';\n      }\n    });\n  }\n\n  resetTarget () {\n    if (!this.target)\n      return;\n\n    this.target.style.willChange = 'initial';\n    this.target.style.transform = 'none';\n    this.target = null;\n  }\n}\n\nwindow.addEventListener('load', () => new Cards());\n\n\n\n// WEBPACK FOOTER //\n// ./index.js"],"sourceRoot":""}